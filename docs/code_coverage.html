<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Xdebug: Documentation Â» Code Coverage Analysis</title>
	<meta name="ROBOTS" content="ALL" />
	<meta name="MSSmartTagsPreventParsing" content="true" />
	<meta name="DESCRIPTION" content="Xdebug: A powerful debugger for PHP" />
	<meta name="AUTHOR" content="Derick Rethans, as in derick@xdebug.org" />
	<link rel="icon" type="image/png" href="../images/favicon.png">
		<link rel="stylesheet" type="text/css" href="../core2.css" />
	<meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
</head>
<body>
	<nav>
	<div class="content_width">
		<h1><a href="../index.html"><svg xmlns="http://www.w3.org/2000/svg" width="351" height="181" viewBox="0 0 351 181"><title>Xdebug</title><g fill="none" fill-rule="evenodd" stroke="#FFF"><g transform="translate(5 5)"><path fill="#317E1E" fill-rule="nonzero" stroke-width="5" d="M127.9 85.5l68.2 70.7.4 17.3h-38.6l-60.8-59.7-60 59.7h-39v-17.6l69.7-69.8-69.6-71.2V-2.5h38.7l60.2 60 61-60h38.3v16l-68.5 72z"/><circle cx="75.9" cy="74.6" r="3.5" stroke-opacity=".8" stroke-width="4"/><circle cx="105.1" cy="85" r="3.5" stroke-opacity=".8" stroke-width="4"/><circle cx="158.4" cy="15" r="3.5" stroke-opacity=".8" stroke-width="4"/><circle cx="50.9" cy="140" r="3.5" stroke-opacity=".8" stroke-width="4"/><circle cx="180.4" cy="158.5" r="3.5" stroke-opacity=".8" stroke-width="4"/><path stroke-linecap="square" stroke-linejoin="round" stroke-width="4" d="M32.6 158.2L42 149M104.3 69.1l49.4-49.4"/><path stroke-linejoin="round" stroke-width="4" d="M102.3 82.7L30.3 10H11.2M167.4 10H183M11.2 160.7l79.2-78"/><path stroke-linejoin="round" stroke-opacity=".7" stroke-width="4" d="M116.3 74.6L181 10"/><path stroke-linejoin="round" stroke-width="4" d="M20.7 19.7l52.7 52.6"/><path stroke-linejoin="round" stroke-opacity=".7" stroke-width="4" d="M116.3 96.7l32 32"/><path stroke-linejoin="round" stroke-width="4" d="M155.2 133.6l22.1 22M53.6 137.5L97 94.9l67.1 66.6h4.9"/></g><g fill="#000" fill-rule="nonzero" stroke-width="4"><path d="M158.3 107.7V72.9c0-.5 0-.5-.8-.5-.7 0-.7 0-.7.6v34.7c0 .6 0 .5.7.5.8 0 .7 0 .7-.5zm3.9 11.2a22.5 22.5 0 0 1-20-.7c-3.4-2-5.2-4.8-5.2-8.4V69.6c0-3 1.5-5.6 4.3-7.4a17 17 0 0 1 9.2-2.4c3 0 5.6.3 7.7 1V47H178v73h-15l-.8-1.1zM200.9 84V73.2c0-.8 0-.8-.8-.8s-.8 0-.8.8V84h1.6zm-1.6 12.5v11c0 .7 0 .7.8.7.7 0 .8 0 .8-.8V97.2h19.8v10.4c0 8.9-7.3 13.2-20.7 13.2-13.3 0-20.5-4.5-20.5-13.7V73.6c0-9.2 7.2-13.8 20.5-13.8 13.4 0 20.7 4.4 20.7 13.4v23.3h-21.4zM243.3 107.7V73c0-.6 0-.6-.7-.6-.8 0-.8 0-.8.5v34.8c0 .6 0 .5.8.5.7 0 .7 0 .7-.5zm-5.4 11.1l-.9 1.3h-15V47h19.8v13.8c2.1-.7 4.7-1 7.9-1 3.1 0 6.1.8 8.8 2.3 3 1.6 4.6 4.2 4.6 7.5v40.2c0 3.6-1.8 6.4-5.3 8.4a22.5 22.5 0 0 1-19.9.6zM285.8 119.7c-2.1.8-4.7 1.1-7.8 1.1a17 17 0 0 1-9.1-2.4c-2.8-1.7-4.4-4.2-4.4-7.2v-51h19.8v47.5c0 .6 0 .5.8.5.7 0 .7 0 .7-.4V60h19.8v60h-19.8v-.4zM328.3 108.3V73c0-.6 0-.6-.7-.6-.8 0-.8 0-.8.6V108c0 .6 0 .6.8.6.7 0 .7 0 .7-.4zm-.9 11.8c-2 .5-4.2.7-6.9.7a17 17 0 0 1-9.1-2.4c-2.9-1.7-4.4-4.2-4.4-7.2V71c0-7.4 5.2-11.2 14.6-11.2 2.3 0 5 .7 8.3 2l1.7-1.7H348v57.3c0 4.4-1 9.5-2.8 12-2.1 3.2-7.7 4.5-17 4.5h-18.4v-12h14.9c1.1 0 2-.7 2.7-1.8z"/></g></g></svg>
</a></h1>
		<ul id="menu">
			<li><a href="install.html">Install</a></li>
			<li><a href="index.html">Documentation</a></li>
			<li><a href="../reporting-bugs.html">Report Issues</a></li>
			<li><a href="https://github.com/xdebug/xdebug" target="_blank">GitHub</a></li>
		</ul>
	</div>
</nav>
<div class="deprecated">
You're visiting the archived website and documentation of Xdebug 2, which is no longer supported. This website is temporarily available and will be discontinued on Dec 31st, 2021.
</div>

	<div class="content_width" id="support">If you find Xdebug useful, please consider <a href='../support.html'>supporting the project</a>.</div>

	<main class="content_width">
<h1>Code Coverage Analysis</h1>

<div class="doc_section">
	<p class='intro'>Code coverage tells you which lines of script (or set of scripts) have
			been executed during a request. With this information you can for
			example find out how good your unit tests are.</p>
	<p>
Xdebug's code coverage functionality is often used in combination with
<a href="https://github.com/sebastianbergmann/php-code-coverage">PHP_CodeCoverage</a>
as part of <a href="https://phpunit.de/">PHPUnit</a> runs. PHPUnit delegates
the code coverage collection to Xdebug. It starts and stops code coverage
through <a href="all_functions.html#xdebug_start_code_coverage">xdebug_start_code_coverage()</a> and <a href="all_functions.html#xdebug_stop_code_coverage">xdebug_stop_code_coverage()</a>
for every test, and uses <a href="all_functions.html#xdebug_get_code_coverage">xdebug_get_code_coverage()</a> to retrieve the
results.
</p>
<p>
Code coverage's main output is an array detailing which lines in which files
have been "hit" while running the code with code coverage collection active.
But the code coverage functionality can also, with an additional performance
impact, analyse which lines of code have executable code on it, which lines of
code can actually be hit (dead code analysis), and also can it do
instrumentation to find out which branches and paths in functions and methods
have been followed. The various options are documented with the
<a href="all_functions.html#xdebug_start_code_coverage">xdebug_start_code_coverage()</a> function.
</p>
<a name="coverage-filter"></a>
<h2>Filtering</h2>
<p>
Xdebug 2.6 introduces filtering capabilities for code coverage. With a filter
you can include, or exclude, paths or class name prefixes (namespaces) from
being analysed during code coverage collection. A
typyical use case would be to configure the filter to only include your
<code>src/</code> folder, so that Xdebug's code coverage analysis does not try
to analyse tests, Composer dependencies, or PHPUnit/PHP_CodeCoverage itself. If
you configure the filter correctly, you can expect a 2-fold speed increase for
code coverage runs
<sup>[<a href="https://twitter.com/jrf_nl/status/955017446674616320">1</a>,
<a href="https://twitter.com/hollodotme/status/953719914686242816">2</a>,
<a href="https://twitter.com/WyriHaximus/status/953667730003001344">3</a>]</sup>.
</p>
<p>
The filter works by tagging each executable unit (function, method, file)
according to the configured filter. Xdebug can only do that the first time a
specific executable unit is included/required, as the filtering happens when
PHP parses and compiles a file for the first time. Xdebug needs to do it as this point, as this is also when
it analyses which paths can run, and which lines of an executable unit can not
be executed. Tagging executable units at this point, also means that the
filter does not have to run every time Xdebug wants to count a line to be
included in code coverage for example. It is therefore <b>important</b> to
set-up the filter <b>before</b> the code is included/required. This currently
can be best done through an auto-prepended file through PHP's
<a href="http://php.net/manual/en/ini.core.php#ini.auto-prepend-file">auto_prepend_file</a> setting.
</p>
<p>
To set-up a filter that only does code coverage analysis for the
<code>src/</code> folder, you would call <a href="all_functions.html#xdebug_set_filter">xdebug_set_filter()</a> with:
</p>

<h3>Example:</h3>
<div class='example'>
<code><pre>
&lt;?php
xdebug_set_filter(
	XDEBUG_FILTER_CODE_COVERAGE,
	XDEBUG_PATH_WHITELIST,
	[ __DIR__ . DIRECTORY_SEPARATOR . "src" . DIRECTORY_SEPARATOR ]
);
?>
</pre></code>
</div>
<p>
With this filter set up, the code coverage information will only include
functions, methods and files which are located in the <code>src/</code>
sub-directory of the file in which this file resides. You can tell PHP to add
this prepend file by calling:
</p>
<pre>
php -dauto_prepend_file=xdebug_filter.php yourscript.php
</pre>
<p>
Or in combination with PHPUnit, when installed through Composer, with:
</p>
<pre>
php -dauto_prepend_file=xdebug_filter.php vendor/bin/phpunit
</pre>
<p>
The full documentation for the arguments to <a href="all_functions.html#xdebug_set_filter">xdebug_set_filter()</a> are
described on its own documentation page.
</p>

			<h2>Related Settings and Functions</h2>
		<ul>
							<li><span class='type'>boolean</span> <a href='code_coverage.html#coverage_enable'>xdebug.coverage_enable</a> = <span class='default'>true</span></li>
					</ul>
		<ul>
							<li><a href='code_coverage.html#xdebug_code_coverage_started'><span class='name'>xdebug_code_coverage_started</span></a>()<span class='type'> : bool</span></li>
							<li><a href='code_coverage.html#xdebug_get_code_coverage'><span class='name'>xdebug_get_code_coverage</span></a>()<span class='type'> : array</span></li>
							<li><a href='code_coverage.html#xdebug_set_filter'><span class='name'>xdebug_set_filter</span></a>()<span class='type'> : void</span></li>
							<li><a href='code_coverage.html#xdebug_start_code_coverage'><span class='name'>xdebug_start_code_coverage</span></a>()<span class='type'> : void</span></li>
							<li><a href='code_coverage.html#xdebug_stop_code_coverage'><span class='name'>xdebug_stop_code_coverage</span></a>()<span class='type'> : void</span></li>
					</ul>
	
	<a name='settings'></a>
			<div class='settings'>
			<h3>Settings</h3>

							<hr>
				<div class="doc_setting">
	<a name='coverage_enable'></a>
	<a name='xdebug.coverage_enable'></a>
	<h4><span class='type'>boolean</span> xdebug.coverage_enable = <span class='default'>true</span> <a href='code_coverage.html#coverage_enable'>#</a></h4>

	<p>Introduced in <span class='type'>Xdebug >= 2.2</span></p>	
	<div class='description'><p>If this setting is set to <code>false</code>, then Xdebug will not set-up internal
		structures to allow code coverage. This speeds up Xdebug quite a bit,
		but of course, <a href='code_coverage.html'>Code Coverage Analysis</a> won't work.</p>
</div>
</div>
					</div>
	
	<a name='functions'></a>
			<div class='functions'>
			<h3>Functions</h3>

							<hr>
				<div class="doc_function">
	<a name='xdebug_code_coverage_started'></a>
	<h3 class="name">
					xdebug_code_coverage_started()
				<span class='type'> : bool</span>
		<a href='code_coverage.html#xdebug_code_coverage_started'>#</a>
	</h3>

	<div class='short-description'><p>Returns whether code coverage is active</p></div>

	
	<div class='description'><p>
Returns whether code coverage has been started.
 

</p><div class='example'><h4>Example:</h4>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">xdebug_code_coverage_started</span><span style="color: #007700">());<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xdebug_start_code_coverage</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">xdebug_code_coverage_started</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<div class='example-returns'><h4>Returns:</h4><pre>
bool(false)
bool(true)</pre></div>
</div>
</div>
							<hr>
				<div class="doc_function">
	<a name='xdebug_get_code_coverage'></a>
	<h3 class="name">
					xdebug_get_code_coverage()
				<span class='type'> : array</span>
		<a href='code_coverage.html#xdebug_get_code_coverage'>#</a>
	</h3>

	<div class='short-description'><p>Returns code coverage information</p></div>

	
	<div class='description'><p>
Returns a structure which contains information about which lines were executed
 in your script (including include files). The following example shows code
 coverage for one specific file:
 

</p><div class='example'><h4>Example:</h4>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />xdebug_start_code_coverage</span><span style="color: #007700">(</span><span style="color: #0000BB">XDEBUG_CC_UNUSED&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">XDEBUG_CC_DEAD_CODE</span><span style="color: #007700">);<br /><br />function&nbsp;</span><span style="color: #0000BB">a</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2.5</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">b</span><span style="color: #007700">(</span><span style="color: #0000BB">$count</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$count&nbsp;</span><span style="color: #007700">&gt;&nbsp;</span><span style="color: #0000BB">25</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"too&nbsp;much\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">a</span><span style="color: #007700">(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">0.17</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">b</span><span style="color: #007700">(</span><span style="color: #0000BB">6</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">b</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">xdebug_get_code_coverage</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<div class='example-returns'><h4>Returns:</h4><pre>
<b>array</b>
  '/home/httpd/html/test/xdebug/docs/xdebug_get_code_coverage.php' <font color='#888a85'>=&gt;</font>
    <b>array</b> <i>(size=11)</i>
      5 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
      6 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>-2</font>
      7 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>-2</font>
      10 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
      11 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>-1</font>
      13 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
      14 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
      16 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
      18 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
      19 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
      21 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font></pre></div>
<p>
The information that is collected consists of an two dimensional array with as
 primary index the executed filename and as secondary key the line number. The
 value in the elements represents whether the line has been executed or whether
 it has unreachable lines.
 

</p><p>
The returned values for each line are:
 <ul>
 	<li><code>1</code>: this line was executed</li>
 	<li><code>-1</code>: this line was not executed</li>
 	<li><code>-2</code>: this line did not have executable code on it</li>
 </ul>
 
 Value <code>-1</code> is only returned when the <code>XDEBUG_CC_UNUSED</code>
 is enabled and value <code>-2</code> is only returned when both
 <code>XDEBUG_CC_UNUSED</code> and <code>XDEBUG_CC_DEAD_CODE</code> are enabled
 when starting <a href='code_coverage.html'>Code Coverage Analysis</a> through <a href="all_functions.html#xdebug_start_code_coverage">xdebug_start_code_coverage()</a>.
 

</p><p>
If path and branch checking has been enabled with the
 <code>XDEBUG_CC_BRANCH_CHECK</code> flag to <a href="all_functions.html#xdebug_start_code_coverage">xdebug_start_code_coverage()</a>
 then the returned format is different. The lines array is returned in
 a sub-array element <code>lines</code>, and separate information is returned
 for each function in the <code>functions</code> element.
 

</p><p>
The following example illustrates that.
 

</p><div class='example'><h4>Example:</h4>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />xdebug_start_code_coverage</span><span style="color: #007700">(</span><span style="color: #0000BB">XDEBUG_CC_UNUSED&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">XDEBUG_CC_DEAD_CODE</span><span style="color: #007700">);<br /><br />function&nbsp;</span><span style="color: #0000BB">c</span><span style="color: #007700">(</span><span style="color: #0000BB">$count</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">+=&nbsp;</span><span style="color: #0000BB">0.17</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">c</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">xdebug_get_code_coverage</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<div class='example-returns'><h4>Returns:</h4><pre>
<b>array</b> <i>(size=1)</i>
  '/tmp/foo2.php' <font color='#888a85'>=&gt;</font>
    <b>array</b> <i>(size=2)</i>
      'lines' <font color='#888a85'>=&gt;</font>
        <b>array</b> <i>(size=5)</i>
          5 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
          6 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
          8 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
          10 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
          12 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
      'functions' <font color='#888a85'>=&gt;</font>
        <b>array</b> <i>(size=1)</i>
          'c' <font color='#888a85'>=&gt;</font>
            <b>array</b> <i>(size=2)</i>
              'branches' <font color='#888a85'>=&gt;</font>
                <b>array</b> <i>(size=4)</i>
                  0 <font color='#888a85'>=&gt;</font>
                    <b>array</b> <i>(size=7)</i>
                      'op_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>0</font>
                      'op_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>4</font>
                      'line_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>4</font>
                      'line_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
                      'hit' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
                      'out' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=1)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>9</font>
                      'out_hit' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=1)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
                  5 <font color='#888a85'>=&gt;</font>
                    <b>array</b> <i>(size=7)</i>
                      'op_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
                      'op_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>8</font>
                      'line_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>6</font>
                      'line_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
                      'hit' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
                      'out' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=1)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>9</font>
                      'out_hit' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=1)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
                  9 <font color='#888a85'>=&gt;</font>
                    <b>array</b> <i>(size=7)</i>
                      'op_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>9</font>
                      'op_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>11</font>
                      'line_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
                      'line_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
                      'hit' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
                      'out' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=2)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>12</font>
                          1 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
                      'out_hit' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=2)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
                          1 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
                  12 <font color='#888a85'>=&gt;</font>
                    <b>array</b> <i>(size=7)</i>
                      'op_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>12</font>
                      'op_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>13</font>
                      'line_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>8</font>
                      'line_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>8</font>
                      'hit' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
                      'out' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=1)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>2147483645</font>
                      'out_hit' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=1)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>0</font>
              'paths' <font color='#888a85'>=&gt;</font>
                <b>array</b> <i>(size=2)</i>
                  0 <font color='#888a85'>=&gt;</font>
                    <b>array</b> <i>(size=2)</i>
                      'path' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=3)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>0</font>
                          1 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>9</font>
                          2 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>12</font>
                      'hit' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>0</font>
                  1 <font color='#888a85'>=&gt;</font>
                    <b>array</b> <i>(size=2)</i>
                      'path' <font color='#888a85'>=&gt;</font>
                        <b>array</b> <i>(size=5)</i>
                          0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>0</font>
                          1 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>9</font>
                          2 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
                          3 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>9</font>
                          4 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>12</font>
                      'hit' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font></pre></div>
<p>
Inside each function the <code>branches</code> element describes each branch.
 

</p><div class='example-returns'><h4>Returns:</h4><pre>
9 <font color='#888a85'>=&gt;</font>
  <b>array</b> <i>(size=7)</i>
    'op_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>9</font>
    'op_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>11</font>
    'line_start' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
    'line_end' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
    'hit' <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
    'out' <font color='#888a85'>=&gt;</font>
      <b>array</b> <i>(size=2)</i>
        0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>12</font>
        1 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>5</font>
    'out_hit' <font color='#888a85'>=&gt;</font>
      <b>array</b> <i>(size=2)</i>
        0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font>
        1 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>1</font></pre></div>
<p>
The index is the starting opcode, and the fields mean:
 
 <dl>
 <dt>op_start</dt>
 <dd>The starting opcode. This is the same number as the array index.</dd>
 
 <dt>op_end</dt>
 <dd>The last opcode in the branch</dd>
 
 <dt>line_start</dt>
 <dd>The line number of the <code>op_start</code> opcode.</dd>
 
 <dt>line_end</dt>
 <dd>The line number of the <code>op_end</code> opcode. This can potentially be
 a number that is lower than <code>line_start</code> due to the way the PHP
 compiler generates opcodes.</dd>
 
 <dt>hit</dt>
 <dd>Whether the opcodes in this branch have been executed or not.</dd>
 
 <dt>out</dt>
 <dd>An array containing the <code>op_start</code> opcodes for branches that
 can follow this one.</dd>
 
 <dt>out_hit</dt>
 <dd>Each element matches the same index as in <code>out</code> and indicates
 whether this branch exit has been reached.</dd>
 </dl>
 

</p><p>
Each function also contains a <code>paths</code> element, which shows all the
 possible paths through the function, and whether they have been hit.
 

</p><div class='example-returns'><h4>Returns:</h4><pre>
1 =>
  array (size=2)
    'path' =>
      array (size=5)
        0 => int 0
        1 => int 9
        2 => int 5
        3 => int 9
        4 => int 12
    'hit' => int 1</pre></div>
<p>
The index is a normal PHP array index, and the fields mean:
 
 <dl>
 <dt>path</dt>
 <dd>An array containing the <code>op_start</code> opcodes indicating the
 branches that make up this path. In the example, <code>9</code> features twice
 because this path (the loop) has after branch <code>9</code> an exit to opcode
 <code>5</code> (the start of the loop), and opcode <code>12</code> (the next
 branch after the loop).</dd>
 
 <dt>hit</dt>
 <dd>Whether this specific path has been followed.</dd>
 </dl>
 

</p><p>
The Xdebug source contains a
 <a href='https://github.com/xdebug/xdebug/blob/master/tests/coverage/dump-branch-coverage.inc'>file</a>
 containing a <code>dump_branch_coverage</code> function, which you can use the
 show the information in a more concise way. The above array would instead be
 shown as:
 

</p><div class='example-returns'><h4>Returns:</h4><pre>
c
- branches
  - 00; OP: 00-04; line: 06-07 HIT; out1: 09 HIT
  - 05; OP: 05-08; line: 08-07 HIT; out1: 09 HIT
  - 09; OP: 09-11; line: 07-07 HIT; out1: 12 HIT; out2: 05 HIT
  - 12; OP: 12-13; line: 10-10 HIT; out1: EX  X
- paths
  - 0 9 12:  X
  - 0 9 5 9 12: HIT</pre></div>
<p>
The function also generates a file <code>/tmp/paths.dot</code>, which can be
 processed with the <em>dot</em> tool of the
 <a href="https://www.graphviz.org/">Graphviz</a> software to create an image.
 

</p><div class='example'><h4>Example:</h4>
<code><span style="color: #000000">
dot&nbsp;-Tpng&nbsp;/tmp/paths.dot&nbsp;&gt;&nbsp;/tmp/paths.png</span>
</code></div>
<p>
This generates an image where a solid line means that the path has been
 followed, and a dashed line means that that path has not been followed.
 

</p><p>
<img src="../images/docs/cc-paths.png">

</p></div>
</div>
							<hr>
				<div class="doc_function">
	<a name='xdebug_set_filter'></a>
	<h3 class="name">
					xdebug_set_filter( <span class='type'>int $group, int $listType, array $configuration</span> )
				<span class='type'> : void</span>
		<a href='code_coverage.html#xdebug_set_filter'>#</a>
	</h3>

	<div class='short-description'><p>Set filter</p></div>

	
	<div class='description'><p>
This function configures a filter that Xdebug employs when displaying stack
 traces or recording function traces, or when gathering code coverage. Filter
 configurations are applied to each execution unit (function, method, script
 body) independently.
 

</p><p>
The first argument, <code>$group</code> selects for which feature you want to
 set up a filter. Currently there are two groups:
 
 <dl>
 <dt>XDEBUG_FILTER_TRACING</dt>
 <dd>The filter group used for filtering <a href='stack_trace.html'>Stack Traces</a> upon errors, as well
 as <a href='execution_trace.html'>Function Trace</a>.</dd>
 
 <dt>XDEBUG_FILTER_CODE_COVERAGE</dt>
 <dd>The filter group used for restricting the file paths which Xdebug would use
 for <a href='code_coverage.html'>Code Coverage Analysis</a>.</dd>
 </dl>
 
 Each group can be configured independently.
 

</p><p>
There are different kinds of filters that you can set. You can filter on either
 file path prefix, or fully qualified class name prefix (i.e. namespace). For
 each filter type you can a list of paths/namespaces to include or exclude. All
 matches are done in a case-insensitive way.
 

</p><p>
The <code>XDEBUG_FILTER_CODE_COVERAGE</code> group only supports
 <code>XDEBUG_PATH_WHITELIST</code>, <code>XDEBUG_PATH_BLACKLIST</code>, and
 <code>XDEBUG_FILTER_NONE</code>. All matches are done in a case-insensitive
 way.
 

</p><p>
The constants to use as second "<code>$list_type</code>" argument are:
 
 <dl>
 <dt>XDEBUG_PATH_WHITELIST</dt>
 <dd><p>Configures a list of file paths to include. An execution unit is
 included in the output if its file path is prefixed by any of the prefixes in
 the array passed as third <code>$configuration</code> argument.</p><p>Please
 note that a prefix of <code>/home/derick</code> would also match files in
 <code>/home/derickrethans</code>, so it is recommended that you add the
 trailing slash to the prefix in order to prevent this.</p></dd>
 
 <dt>XDEBUG_PATH_BLACKLIST</dt>
 <dd><p>Sets up a list of paths to exclude. An execution unit will be excluded
 from the output if its file path is prefixed by any of the prefixes from the
 <code>$configuration</code> array.</p></dd>
 
 <dt>XDEBUG_NAMESPACE_WHITELIST</dt>
 <dd><p>Configures a list of class name prefixes to include. An execution unit is included in
 the output if the class name, after namespace expansion, matches one of the
 prefixes in the <code>$configuration</code> array. An empty string value is
 special, and means functions that do not belong to a class. These are either
 user-defined, or built-in PHP functions (e.g. <code>strlen()</code>).</p>
 <p>Name space expansion happens automatically in PHP, and its engine will
 always see the full qualified class name. In the code below, the
 fully qualified class name <code>DramIO\Whisky</code>:
 

</p><div class='example'><h4>Example:</h4>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">DramIO</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">Whisky&nbsp;</span><span style="color: #007700">{<br />}</span>
</span>
</code></div>
<p>
<p>
 In order to match for all clases within a namespace, it is recommended to specify the prefix with the namespace separator
 </p></dd>
 
 <dt>XDEBUG_NAMESPACE_BLACKLIST</dt>
 <dd>Sets up a list of namespaces to exclude. Execution units are excluded only
 if their prefix matches one of the prefixes in the <code>$configuration</code>
 array.</dd>
 
 <dt>XDEBUG_FILTER_NONE</dt>
 <dd>Turns off the filter for the selected <code>$group</code>.</dd>
 </dl>
 

</p><p>
It is not possible to configure a filter for paths/namespaces at the same time,
 and neither is it possible to configure which paths to exclude and include at
 the same time. Only one of the four list types can be active at any one time.
 
 It is possible however, to turn off the filter altogether by using
 <code>XDEBUG_FILTER_NONE</code>.
 

</p><p>
To exclude all files in the <code>vendor</code> sub-directory in traces:
 

</p><div class='example'><h4>Example:</h4>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />xdebug_set_filter</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">XDEBUG_FILTER_TRACING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">XDEBUG_PATH_BLACKLIST</span><span style="color: #007700">,&nbsp;[&nbsp;</span><span style="color: #0000BB">__DIR__&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"/vendor/"&nbsp;</span><span style="color: #007700">]&nbsp;);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
<p>
To include only function calls (without class name), and methods calls for the
 <code>ezc</code> and <code>DramIO\</code> classes in traces:
 

</p><div class='example'><h4>Example:</h4>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />xdebug_set_filter</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">XDEBUG_FILTER_TRACING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">XDEBUG_NAMESPACE_WHITELIST</span><span style="color: #007700">,&nbsp;[&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ezc"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"DramIO\"&nbsp;]&nbsp;);<br />?&gt;</span>
</span>
</code></div>
<p>
To only perform code-coverage analysis for files in the <code>src</code> sub-directory:
 

</p><div class='example'><h4>Example:</h4>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />xdebug_set_filter</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">XDEBUG_FILTER_CODE_COVERAGE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">XDEBUG_PATH_WHITELIST</span><span style="color: #007700">,&nbsp;[&nbsp;</span><span style="color: #0000BB">__DIR__&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"/src/"&nbsp;</span><span style="color: #007700">]&nbsp;);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
</div>
</div>
							<hr>
				<div class="doc_function">
	<a name='xdebug_start_code_coverage'></a>
	<h3 class="name">
					xdebug_start_code_coverage( <span class='type'>int $options = 0</span> )
				<span class='type'> : void</span>
		<a href='code_coverage.html#xdebug_start_code_coverage'>#</a>
	</h3>

	<div class='short-description'><p>Starts code coverage</p></div>

	
	<div class='description'><p>
This function starts gathering the information for code coverage. The information
 can be retrieved with the <a href="all_functions.html#xdebug_get_code_coverage">xdebug_get_code_coverage()</a> function.
 

</p><p>
This function has three options, which act as a bitfield:
 
 <dl>
 <dt>XDEBUG_CC_UNUSED</dt>
 <dd>Enables scanning of code to figure out which line has executable code.
 Without this option the returned array will only have lines in them that were
 actually executed.</dd>
 
 <dt>XDEBUG_CC_DEAD_CODE</dt>
 <dd>Enables branch analyzes to figure out whether code can be executed.</dd>
 
 <dt>XDEBUG_CC_BRANCH_CHECK</dt>
 <dd>Enables path execution analysis.</dd>
 </dl>
 
 Enabling those options make code coverage drastically slower.
 

</p><p>
You can use the options as shown in the following example.
 

</p><div class='example'><h4>Example:</h4>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />xdebug_start_code_coverage</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">XDEBUG_CC_UNUSED&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">XDEBUG_CC_DEAD_CODE&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
</div>
</div>
							<hr>
				<div class="doc_function">
	<a name='xdebug_stop_code_coverage'></a>
	<h3 class="name">
					xdebug_stop_code_coverage( <span class='type'>bool $cleanUp = true</span> )
				<span class='type'> : void</span>
		<a href='code_coverage.html#xdebug_stop_code_coverage'>#</a>
	</h3>

	<div class='short-description'><p>Stops code coverage</p></div>

	
	<div class='description'><p>
This function stops collecting information, the information in memory will
 be destroyed. If you pass 0 as an argument, then the code coverage
 information will not be destroyed so that you can resume the gathering of
 information with the <a href="all_functions.html#xdebug_start_code_coverage">xdebug_start_code_coverage()</a> function again.

</p></div>
</div>
					</div>
	</div>


</main>


	<footer class="content_width">
		<p>
		This site and all of its contents are Copyright &copy; 2002-2020 by Derick Rethans.<br />
		All rights reserved.
		</p>
	</footer>
</body>
</html>
